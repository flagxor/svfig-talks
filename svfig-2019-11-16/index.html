<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Squeezing Forth into 64 Bits</title>
    <meta name="description"
          content="Squeezing Forth into 64 Bits - November 16, 2019">
    <meta name="author" content="Brad Nelson">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style"
    content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="../reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../reveal.js/css/theme/simple.css" id="theme">
    <!-- Code syntax highlighting -->
    <!--
      <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">
    -->
    <script src="../common/printing.js"></script>
    <!--[if lt IE 9]>
    <script src="../reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->
    <style>
pre {
  background-color: #ddd;
}
pre.gold {
  background-color: #fed;
}
pre.blue {
  background-color: #def;
}
span.gold {
  color: #c80;
}
span.blue {
  color: #08c;
}
div.code {
  font-family: monospace;
}
span.revlabel {
  color: #aaa;
  background-color: #000;
}
    </style>
  </head>

<!--

Squeezing Forth into 64 Bits
----------------------------
Over the last decade 64-bit processors have largely displaced 32-bit,
outside of embedded applications. Recently, operating systems have begun
dropping  support for running 32-bit processes on 64-bit systems.

A larger natural cell size, enough to fit whole Forth word strings
into a single machine word, is an opportunity to simplify the design
of Forth. I'll explore what this looks like in a small Forth, and
touch on how OS hosted Forths fit into a world of ever growing
complexity.

-->

  <body>
    <div style="position: fixed; bottom: 0; width: 100%">
      <center>
        <h2 style="font-family=monospace; color: blue" id="cc1"></h2>
        <h2 style="font-family=monospace" id="cc2"></h2>
      </center>
    </div>
    <div class="reveal">

      <div class="slides">
        <section data-transition="fade-out">
          <h2><span class="blue">
          Squeezing Forth into 64 Bits</h2>
          <h2>November 16, 2019</h2>
          <p>
          <small><a href="http://flagxor.com">Brad Nelson</a> /
            <a href="http://twitter.com/flagxor">@flagxor</a></small>
          </p>
        </section>

        <section data-transition="fade-out">
          <h2>Caveats</h2>
          <ul>
            <li></li>
          </ul>
        </section>

        <section data-transition="fade-out">
          <h2>Forthopedia</h2>
          <ul>
            <li><a href="https://github.com/flagxor/forthopedia">
            https://github.com/flagxor/forthopedia</a></li>
          </ul>
        </section>

        <section data-transition="fade-out">
          <h2>Motivation</h2>
          <ul>
            <li>Oct 7, 2019 - Mac OSX 10.15 (Catalina) drops 32-bit support</li>
            <li>Oct, 2019 - Ubuntu 19.10 initially planned to drop 32-bit support
            <ul>
            <li>Wine + gaming community prompted change to support some packages for now</li></ul>
          </ul>
        </section>

        <section data-transition="fade-out">
          <h2>Motivation</h2>
          <pre>
Linus Torvalds &lt;torvalds@linux-foundation.org&gt;
<b>Merge branch 'x86-nuke386-for-linus'
of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip</b>
Pull "Nuke 386-DX/SX support" from Ingo Molnar:
 "This tree removes ancient-386-CPUs support and thus zaps
  quite a bit of complexity:

    24 files changed, 56 insertions(+), 425 deletions(-)

  ... which complexity has plagued us with extra work
  whenever we wanted to change SMP primitives, for years.

  Unfortunately there's a nostalgic cost: your old original
  386 DX33 system from early 1991 won't be able to boot modern
  Linux kernels anymore.  Sniff."

I'm not sentimental.  Good riddance.
</pre>
        </section>

        <section data-transition="fade-out">
          <h2>Motivation</h2>
          <ul>
            <li>SwiftForth for Windows: Windows Vista or later</li>
            <li>SwiftForth for macOS: Mac OS X 10.6 through macOS <b>10.14 (requires 32-bit library support)</b></li>
            <li>SwiftForth for Linux: Linux 2.6 kernel or later with <b>32-bit library support</b></li>
          </ul>
        </section>

        <section data-transition="fade-out">
          <h2>Forth's Character Set</h2>
          <ul>
            <li>Forth uses &lt;# # #&gt; () [] @ DATE&TIME !</li>
            <li>Why don't we tend to use ` ~ | {} ?</li>
            <li>Why do some EForths AND with $5F ?</li>
          </ul>
        </section>

        <section data-transition="fade-out">
          <h2>Forth's Character Set</h2>
          <div class="code">
&nbsp;&nbsp;<span class="revlabel">0123456789ABCDEF</span><br/>
<span class="revlabel">0x</span><span class="gold">@ABCDEFGHIJKLMNO</span><br/>
<span class="revlabel">1x</span><span class="gold">PQRSTUVWXYZ[\]^_</span><br/>
<span class="revlabel">2x</span>&nbsp;!"#$%&amp;'()*+,-./<br/>
<span class="revlabel">3x</span>0123456789:;&lt;=&gt;?<br/>
<span class="revlabel">4x</span>@ABCDEFGHIJKLMNO<br/>
<span class="revlabel">5x</span>PQRSTUVWXYZ[\]^_<br/>
<span class="revlabel">6x</span>`abcdefghijklmno<br/>
<span class="revlabel">7x</span>pqrstuvwxyz{|}~<span class="gold">?</span><br/>
          </div>
          <div><span class="gold">Ctrl</span></div>
        </section>

        <section data-transition="fade-out">
          <h2>Forth's Character Set</h2>
          <div class="code">
&nbsp;&nbsp;<span class="revlabel">0123456789ABCDEF</span><br/>
<span class="revlabel">0x</span><span class="gold">@ABCDEFGHIJKLMNO</span><br/>
<span class="revlabel">1x</span><span class="gold">PQRSTUVWXYZ[\]^_</span><br/>
<span class="revlabel">2x</span><span class="blue">&nbsp;!"#$%&'()*+,-./</span><br/>
<span class="revlabel">3x</span><span class="blue">0123456789:;<=>?</span><br/>
<span class="revlabel">4x</span><span class="blue">@ABCDEFGHIJKLMNO</span><br/>
<span class="revlabel">5x</span><span class="blue">PQRSTUVWXYZ[\]^_</span><br/>
<span class="revlabel">6x</span>`abcdefghijklmno<br/>
<span class="revlabel">7x</span>pqrstuvwxyz{|}~<span class="gold">?</span><br/>
          </div>
          <div><span class="gold">Ctrl</span> --
               <span class="blue">Forth</span></div>
        </section>

        <section data-transition="fade-out">
          <h2>Forth's Character Set</h2>
          <ul>
            <li>Basically a 6-bit character set!</li>
          </ul>
        </section>

        <section data-transition="fade-out">
          <h2>Forth's Character Set (I lied)</h2>
          <ul>
            <li>F~ ( f-proximate )</li>
            <li>LOCALES|</li>
            <li>% ^ _ aren't used</li>
            <li>$ is widely used for hex</li>
          </ul>
        </section>

        <section data-transition="fade-out">
          <h2>Digit Conversion</h2>
          <img src="https://upload.wikimedia.org/wikipedia/en/0/03/Aybabtu.png" width="400">
          <pre class="code">
: DIGIT ( c -- n ) 9 over < 7 and + [char] 0 + ;
: DIGIT? ( c base -- u t )
   >R [char] 0 - 9 OVER <
   IF 7 - DUP 10 < OR THEN DUP R> U< ;</pre>
        </section>

        <section data-transition="fade-out">
          <p>
          <a href="https://github.com/flagxor/svfig-talks">slides</a>
          at:
          <a href="https://github.com/flagxor">
            github.com/flagxor</a></p>
          <p>
          </p>
          <h1>&#x2698;</h1>
          <h2>Thank you</h2>
        </section>

     </div>
    </div>

    <script src="../reveal.js/lib/js/head.min.js"></script>
    <script src="../reveal.js/js/reveal.js"></script>
    <script src="../common/config_vision.js"></script>
  </body>
</html>
